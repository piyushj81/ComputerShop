<%@page import="java.sql.ResultSet"%>
<%@page import="java.sql.PreparedStatement"%>
<%@page import="java.sql.DriverManager"%>
<%@page import="java.sql.Connection"%>
<%@page import="com.shop.dto.Customer"%>
<%@page import="com.shop.dto.Cart"%>
<%@page import="java.util.ArrayList"%>
<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
    pageEncoding="ISO-8859-1"%>
<!DOCTYPE html>
<html>
<head>
<meta charset="ISO-8859-1">
<title>admin</title>
<%
response.addHeader("pragma ", "no-cache ");
response.addHeader(" cache-control", "nostore");
response.addHeader("expire ", "0");
%>
<link rel="stylesheet" href="computershop.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css"
    integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">
  <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"
    integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj"
    crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-ho+j7jyWK8fNQe+A12Hb8AhRq26LrZ/JpcUGGOn+Y7RsweNrtN/tE3MoK7ZeZDyx"
    crossorigin="anonymous"></script>


</head>
<body><center>
<h1> Admin Home</h1>
  <a href="LogoutController" ><button class="btn btn-danger" type="button"> LOG OUT</button></a>
</center>
<div class="peripheral">
<button type="button" class="btn btn-success">SHOP PRODUCT DETAILS</button>
<button type="button" class="btn btn-success">USER CART DETAILS</button>|
</div>
<%
Class.forName("com.mysql.jdbc.Driver");
Customer cst = null;
Connection con = DriverManager.getConnection("jdbc:mysql://localhost:3306/shop", "root", "root");
try {
	PreparedStatement ps = con.prepareStatement("Select * from customerlogin where username= ? ");
	ps.setString(1, (String) session.getAttribute("user"));

	ResultSet rs = ps.executeQuery();
	if (rs.next()) {
		cst = new Customer(rs.getString("username"), rs.getString("phone"), rs.getString("password"));
	}
} catch (Exception e) {
	e.printStackTrace();
}
%><div><% 
ArrayList<Cart> list2 =(ArrayList<Cart>) request.getAttribute("list2");
			if(!(list2 == null) || !(list2.isEmpty())) {
	
					%>
				</h2>
				<table style="width:175%;text-align:center; color:white;"    class="table table-hover table-dark tablesm"   >
					<tr>
						<th>PHONE</th>
						<th>IMAGE</th>
						<th>PRODUCT ID</th>
						<th>PRODUCT NAME</th>
						<th>MODEL NUMBER</th>
						<th>PRICE</th>
						
					</tr>
					<%
					for (Cart ct : list2) {
					%>

					<tr>
						<td><%=ct.getPhone() %></td>&nbsp;&nbsp;
						
						<td> <img alt="" src="<%=ct.getPic()%>style="max-height:50%; max-width:70%"> </td>
						<td><%=ct.getId() %></td>&nbsp;&nbsp;
						<td><%=ct.getPname()%></td>&nbsp;&nbsp;
						<td><%=ct.getModel()%></td>&nbsp;&nbsp;
						<td><%=ct.getPrice()%></td>&nbsp;&nbsp;
	
				</tr>			
									
													
					<%
					}
					%>


				</table>

				<%
			}else {
				out.println("LIST NOT AVAILAIBLE");

				}
				%>
				</div>
</body>
</html>